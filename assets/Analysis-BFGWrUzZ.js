import{d as P,f as O,j as e,F as f,r as o,X as w,W as C,$,b$ as E,a1 as z,bj as I,v as W,A as D,aA as H}from"./index-C24s9YLx.js";import{b as G}from"./index-CRRG72Lv.js";import{C as V}from"./CardSkeleton-B53fmzNC.js";const X=({iconText:c,firstText:l,secondText:x,reports:i})=>{const{t:u}=P(),a=O();return e.jsxs("div",{className:"h-[200px] w-[456px] rounded-lg shadow-card flex flex-col justify-between p-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"bg-primary02 h-8 w-8 rounded-3xl flex justify-center items-center",children:e.jsx(f,{icon:c,className:"text-white w-4 h-4"})}),e.jsx("div",{className:"font-semibold text-lg text-text01",children:l})]}),e.jsx("hr",{}),e.jsx("div",{className:"text-text02 w-64",children:x})]}),e.jsx("div",{className:"font-semibold text-primary02 mt-auto cursor-pointer",onClick:()=>a("/analysis/report",{state:{ownerId:i==null?void 0:i.id}}),children:u("analysis.to")})]})},J=()=>{const{t:c}=P(),[l,x]=o.useState("POS"),i=w(),u=C(),a=C(),h=$(),S=w(),R=E(),y=z(),n=Math.ceil(R/S),{filterOn:d,setFilterOn:m}=I(),[T,v]=o.useState(!1),[p,k]=o.useState(""),{data:t,mutate:b,isLoading:g,isValidating:A}=W(["get-all-report"],()=>G({category:l,page:u,size:i}));o.useEffect(()=>{v(!0),b().then(()=>v(!1))},[d,b]),o.useEffect(()=>{!g&&(t!=null&&t.count)&&y(t==null?void 0:t.count)},[t==null?void 0:t.count,g,y]);const N=o.useMemo(()=>(t==null?void 0:t.reports.filter(s=>s.name.toLowerCase().includes(p.toLowerCase())))||[],[t==null?void 0:t.reports,p]),M=()=>{const s=[];if(n<=5)for(let r=1;r<=n;r++)s.push(r);else{s.push(1),a>3&&s.push("...");const r=Math.max(2,a-1),L=Math.min(n-1,a+1);for(let j=r;j<=L;j++)s.push(j);a<n-2&&s.push("..."),s.push(n)}return s},F=s=>{typeof s=="number"&&(m(!d),h(s))};return e.jsxs("div",{children:[e.jsx(D,{count:N.length,hideDateTime:!0,hideCity:!0,search:p,setSearch:k,children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-text02",children:c("warehouse.category")}),e.jsx(H,{className:"w-full sm:w-80 h-10",value:l,onChange:s=>x(s),options:[{label:c("analysis.posId"),value:"POS"}],dropdownRender:s=>e.jsx("div",{style:{maxHeight:100,overflowY:"auto"},children:s})})]})}),e.jsx("hr",{className:"my-4"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-text01 uppercase",children:c("analysis.oper")}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:g||A||T?e.jsx(V,{cardHeight:"200px",cardWidth:"456px"}):N.map(s=>e.jsx(X,{iconText:"file-text",firstText:s.name,secondText:s.description||"",reports:s}))})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx("button",{onClick:()=>{const s=Math.max(1,a-1);m(!d),h(s)},disabled:a===1,className:`px-2 py-1 ${a===1?"text-gray-400 cursor-not-allowed":"text-text01"}`,children:e.jsx(f,{icon:"chevron-left"})}),M().map((s,r)=>s==="..."?e.jsx("span",{className:"px-2 py-1 text-gray-400",children:"..."},r):e.jsx("button",{onClick:()=>F(s),className:`px-4 py-2 font-semibold ${a===s?"bg-white text-primary02 rounded-lg border border-primary02":"text-text01"}`,children:s},r)),e.jsx("button",{onClick:()=>{m(!d),h(Math.min(n,a+1))},disabled:a===n,className:`px-2 py-1 ${a===n?"text-gray-400 cursor-not-allowed":"text-text01"}`,children:e.jsx(f,{icon:"chevron-right"})})]})]})};export{J as default};
