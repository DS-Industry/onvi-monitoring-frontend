import{d as v,j as a,aK as y,c7 as m,r as f,v as B,aF as T,aG as I,aH as j,aI as b,aM as N,aq as d,bz as A}from"./index-C24s9YLx.js";import{m as W}from"./index-Dx68t6LI.js";import{B as G,C as L,a as M,L as O,b as _,p as z,c as P,d as Z}from"./index-aAWuU0TO.js";import{G as q,R as F}from"./BarChartOutlined-BasKC_kT.js";L.register(M,O,_,z,P,Z);const H=({data:c})=>{const{t:g}=v(),l=c.map(r=>r.posName),h=c.map(r=>r.sum),p={labels:l,datasets:[{label:g("indicators.rev"),data:h,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1,borderRadius:4,barThickness:50,maxBarThickness:100}]},u={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}},scales:{x:{beginAtZero:!0},y:{beginAtZero:!0}}};return a.jsx("div",{className:"w-80 md:w-full h-96",children:a.jsx(G,{data:p,options:u})})},J=()=>{const g=new Date().toISOString().slice(0,10),{t:l}=v(),{Title:h}=y,{RangePicker:p}=m,{useBreakpoint:u}=q,r=u(),D=[{label:l("dashboard.today"),value:"today"},{label:l("dashboard.week"),value:"week"},{label:l("dashboard.month"),value:"month"}],[n,o]=f.useState({dateStart:new Date("2023-01-01T00:00:00"),dateEnd:new Date(`${g}T23:59:59`)}),[S,i]=f.useState(null),{data:x,isLoading:C,isValidating:R}=B(["get-rating-org",n],()=>W(n)),w=(x==null?void 0:x.map(e=>e))||[],k=e=>{const s=new Date;let t=s;e==="today"?t=new Date(s.toISOString().slice(0,10)):e==="week"?(t=new Date,t.setDate(s.getDate()-7)):e==="month"&&(t=new Date,t.setMonth(s.getMonth()-1)),o({dateStart:t,dateEnd:s}),i(e)},E=e=>{if(e){const[s,t]=e;o({dateStart:(s==null?void 0:s.toDate())||new Date,dateEnd:(t==null?void 0:t.toDate())||new Date}),i(null)}};return a.jsxs(T,{className:"mt-4 w-full min-w-64",bodyStyle:{padding:"24px"},variant:"borderless",children:[a.jsx(h,{level:4,style:{marginBottom:"24px"},children:l("indicators.carWash")}),a.jsxs(I,{justify:"space-between",gutter:[16,16],style:{marginBottom:"24px"},children:[a.jsx(j,{xs:24,lg:16,children:a.jsx(b,{wrap:!0,children:D.map(e=>a.jsx(N,{type:S===e.value?"primary":"default",shape:"round",onClick:()=>k(e.value),children:e.label},e.value))})}),a.jsx(j,{xs:24,lg:8,children:r.xs?a.jsxs(b,{direction:"vertical",style:{width:"100%"},children:[a.jsx(m,{placeholder:"Start date",value:d(n.dateStart),onChange:e=>{e&&(o({...n,dateStart:e.toDate()}),i(null))},style:{width:"100%"}}),a.jsx(m,{placeholder:"End date",value:d(n.dateEnd),onChange:e=>{e&&(o({...n,dateEnd:e.toDate()}),i(null))},style:{width:"100%"}})]}):a.jsx(p,{onChange:E,value:[d(n.dateStart),d(n.dateEnd)],allowClear:!1,style:{width:"100%"}})})]}),a.jsx("div",{className:"chart-container",style:{width:"100%",overflowX:"auto"},children:C||R?a.jsx("div",{className:"h-full flex flex-col w-full",children:a.jsx(A.Image,{style:{width:"100%",height:"380px"},active:!0})}):w.length>0?a.jsx(H,{data:w}):a.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"300px"},children:a.jsxs(b,{direction:"vertical",align:"center",children:[a.jsx(F,{style:{fontSize:"48px",opacity:.5}}),a.jsx(y.Text,{type:"secondary",children:"No data available"})]})})})]})};export{J as default};
