import{r as g,d as v,j as e,by as b,aC as k,B as j,K as a,L as y,F as w}from"./index-C24s9YLx.js";const N=({columns:t,selectedColumns:r,onColumnToggle:o,isModalOpen:p,setIsModalOpen:c,setSelectedColumns:m})=>{const[u,h]=g.useState(""),l=s=>{h(s)},i=t.filter(s=>s.label.toLowerCase().includes(u.toLowerCase())),{t:n}=v(),d={"СЕГМЕНТАЦИЯ ПО ДАННЫМ КЛИЕНТА":i.filter(s=>s.key==="clientType"||s.key==="tags"||s.key==="registrationDate"),"СЕГМЕНТАЦИЯ ПО ПОСЕЩЕНИЯМ":i.filter(s=>s.key==="visitCount"||s.key==="averageCheck"||s.key==="orderSum"||s.key==="visitDateRange"),"СЕГМЕНТАЦИЯ ПО ПРОГРАММЕ ЛОЯЛЬНОСТИ":i.filter(s=>s.key==="bonusProgram"||s.key==="discountProgram"||s.key==="noProgram")};return e.jsx(e.Fragment,{children:p&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white w-full max-w-4xl rounded-lg p-6 relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 text-text01",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Сегменты отбора"}),e.jsxs("div",{className:"flex justify-center items-center space-x-6",children:[e.jsx(b,{placeholder:"Поиск",value:u,onChange:l,searchType:"outlined",classname:"w-80"}),e.jsx(k,{onClick:()=>c(!1),className:"cursor-pointer w-6 h-6"})]})]}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-3/12 pr-4 space-y-2",children:r.map(s=>{const x=t.find(f=>f.key===s);return x&&e.jsx("div",{className:"text-base text-text01",children:x.label})})}),e.jsx("div",{className:"w-9/12 space-y-6 bg-disabledFill rounded-2xl p-4 text-text01",children:Object.keys(d).map(s=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm uppercase mb-2",children:s}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:d[s].map(x=>e.jsxs("label",{className:"flex items-center text-base",children:[e.jsx("input",{type:"checkbox",checked:r.includes(x.key),onChange:()=>o(x.key),className:"mr-2"}),x.label]},x.key))})]},s))})]}),e.jsxs("div",{className:"flex justify-between mt-6",children:[e.jsx(j,{title:n("organizations.save"),handleClick:()=>{c(!1),m(r)}}),e.jsx(j,{title:n("warehouse.reset"),handleClick:()=>{c(!1),m([])},type:"outline"})]})]})})})},C=[{label:"Тип клиента",key:"clientType"},{label:"Теги",key:"tags"},{label:"Дата регистрации",key:"registrationDate"},{label:"Количество посещений",key:"visitCount"},{label:"Средний чек",key:"averageCheck"},{label:"Сумма заказов",key:"orderSum"},{label:"Диапазон дат посещений",key:"visitDateRange"},{label:"Бонусная программа",key:"bonusProgram"},{label:"Скидочная программа",key:"discountProgram"},{label:"Без программы",key:"noProgram"}],S={clientType:e.jsx(y,{title:"Тип клиента",classname:"w-80",value:void 0,options:[]}),tags:e.jsx(a,{title:"Теги",classname:"w-80"}),registrationDate:e.jsx(a,{type:"date",title:"Дата регистрации",classname:"w-80"}),visitCount:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(a,{type:"number",title:"Количество посещений (от)",classname:"w-64"}),e.jsx(a,{type:"number",title:"Количество посещений (до)",classname:"w-64"})]}),averageCheck:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(a,{type:"number",title:"Средний чек (от)",classname:"w-64"}),e.jsx(a,{type:"number",title:"Средний чек (до)",classname:"w-64"})]}),orderSum:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(a,{type:"number",title:"Сумма заказов (от)",classname:"w-64"}),e.jsx(a,{type:"number",title:"Сумма заказов (до)",classname:"w-64"})]}),visitDateRange:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(a,{type:"date",title:"Диапазон дат посещений (с)",classname:"w-64"}),e.jsx(a,{type:"date",title:"Диапазон дат посещений (по)",classname:"w-64"})]}),bonusProgram:e.jsx(a,{title:"Бонусная программа",classname:"w-80"}),discountProgram:e.jsx(a,{title:"Скидочная программа",classname:"w-80"}),noProgram:e.jsx(a,{title:"Без программы",classname:"w-80"})},D=()=>{const{t}=v(),[r,o]=g.useState([]),[p,c]=g.useState(!1),m={"СЕГМЕНТАЦИЯ ПО ДАННЫМ КЛИЕНТА":["clientType","tags","registrationDate"],"СЕГМЕНТАЦИЯ ПО ПОСЕЩЕНИЯМ":["visitCount","averageCheck","orderSum","visitDateRange"],"СЕГМЕНТАЦИЯ ПО ПРОГРАММЕ ЛОЯЛЬНОСТИ":["bonusProgram","discountProgram","noProgram"]},u=l=>{o(i=>i.includes(l)?i.filter(n=>n!==l):[...i,l])},h=Object.entries(m).reduce((l,[i,n])=>{const d=n.filter(s=>r.includes(s));return d.length>0&&l.push({group:i,components:d}),l},[]);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex font-semibold space-x-1",children:[e.jsx("div",{className:"text-text01",children:t("routine.fields")}),e.jsx("div",{className:"text-textError",children:"*"}),e.jsx("div",{className:"text-text01",children:t("routine.are")})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(a,{title:t("marketing.segName"),classname:"w-96"}),e.jsx(y,{title:`${t("pos.city")}*`,classname:"w-64",value:void 0,options:[]}),e.jsx(y,{title:t("equipment.carWash"),classname:"w-64",value:void 0,options:[]})]})]}),r.length===0&&e.jsx("div",{className:"shadow-card h-20 w-[1128px] rounded-2xl flex items-center justify-center",children:e.jsxs("div",{className:"flex text-primary02 cursor-pointer items-center justify-center font-semibold space-x-1",onClick:()=>c(!0),children:[e.jsx(w,{icon:"plus",className:"w-6 h-6"}),e.jsx("div",{children:t("marketing.addSel")})]})}),e.jsxs("div",{children:[e.jsx(N,{columns:C,selectedColumns:r,onColumnToggle:u,isModalOpen:p,setIsModalOpen:c,setSelectedColumns:o}),r.length>0&&e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsx("div",{className:"font-semibold text-2xl text-text01",children:t("marketing.filterC")}),h.map(({group:l,components:i})=>e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-text01 uppercase mb-4",children:l}),e.jsx("div",{className:"flex flex-wrap space-x-4",children:i.map(n=>e.jsx("div",{children:S[n]},n))})]},l)),e.jsxs("div",{className:"flex space-x-4 items-center",children:[e.jsx(j,{title:t("warehouse.reset"),type:"outline"}),e.jsx(j,{title:t("marketing.apply")}),e.jsx("div",{className:"text-primary02 cursor-pointer font-semibold",onClick:()=>c(!0),children:t("marketing.edit")})]}),e.jsx("div",{className:"font-semibold text-2xl text-text01",children:t("marketing.list")})]})]})]})};export{D as default};
