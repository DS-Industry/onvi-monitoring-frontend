import{d as G,f as V,b as q,r as s,X as A,a0 as B,W as H,bj as U,v as y,cF as X,cM as J,cG as K,j as t,A as Q,ap as I,L as Y,D as Z,cN as k,G as _,H as $,aq as u}from"./index-C24s9YLx.js";import{N as F}from"./NoCollection-BFjlj1pW.js";const te=()=>{const{t:n}=G(),P=V(),{buttonOn:f}=q(),[o,i]=s.useState(null),[r,v]=s.useState(null),[c,m]=s.useState("*"),[S,D]=s.useState(!1),b=A(),N=B(),x=H(),{filterOn:W}=U(),{data:d}=y(["get-positions"],()=>X(),{revalidateOnFocus:!1,revalidateOnReconnect:!1,keepPreviousData:!0}),O=(d==null?void 0:d.map(e=>({name:e.props.name,value:e.props.id,label:e.props.name})))||[],{data:h,isLoading:C,mutate:j}=y(["get-payments"],()=>J({startPaymentDate:a.startPaymentDate?a.startPaymentDate:"*",endPaymentDate:a.endPaymentDate?a.endPaymentDate:"*",hrWorkerId:a.hrWorkerId,billingMonth:a.billingMonth?a.billingMonth:"*"}),{revalidateOnFocus:!1,revalidateOnReconnect:!1,keepPreviousData:!0}),p=(h==null?void 0:h.map(e=>{var l;return{...e,hrPosition:(l=O.find(R=>R.value===e.hrPositionId))==null?void 0:l.name}}))||[],M={startPaymentDate:o?o.toDate():"*",endPaymentDate:r?r.toDate():"*",hrWorkerId:c,billingMonth:"*",page:x,size:b},[a,T]=s.useState(M),z=e=>{T(l=>({...l,...e})),D(!0),e.startPaymentDate&&i(typeof e.startPaymentDate=="string"?u(e.startPaymentDate):u(e.startPaymentDate)),e.endPaymentDate&&v(typeof e.endPaymentDate=="string"?u(e.endPaymentDate):u(e.endPaymentDate)),e.hrWorkerId&&m(e.hrWorkerId),e.size&&N(e.size)};s.useEffect(()=>{z({startPaymentDate:o==null?void 0:o.toDate(),endPaymentDate:r==null?void 0:r.toDate(),hrWorkerId:c,billingMonth:"*",page:x,size:b})},[W]),s.useEffect(()=>{j().then(()=>D(!1))},[a,j]);const E=()=>{i(null),v(null),m("*")},{data:g}=y(["get-workers"],()=>K({placementId:"*",hrPositionId:"*",organizationId:"*"}),{revalidateOnFocus:!1,revalidateOnReconnect:!1,keepPreviousData:!0}),L=[{name:n("hr.all"),value:"*"},...(g==null?void 0:g.map(e=>({name:e.props.name,value:e.props.id})))||[]];return s.useEffect(()=>{f&&P("/hr/salary/creation")},[f,P]),t.jsxs("div",{children:[t.jsxs(Q,{count:p.length,hideDateTime:!0,hideCity:!0,hideSearch:!0,handleClear:E,children:[t.jsx(I,{title:n("hr.startPaymentDate"),classname:"w-64",value:o,changeValue:e=>i(e)}),t.jsx(I,{title:n("hr.endPaymentDate"),classname:"w-64",value:r,changeValue:e=>i(e)}),t.jsx(Y,{title:n("routes.employees"),classname:"w-full sm:w-80",label:n("warehouse.notSel"),options:L,value:c,onChange:e=>m(e)})]}),C||S?t.jsx(Z,{columnCount:k.length}):p.length>0?t.jsx("div",{className:"mt-8",children:t.jsx(_,{data:p.map((e,l)=>({...e,id:l})),columns:k})}):t.jsx("div",{className:"flex flex-col justify-center items-center",children:t.jsx($,{title:n("hr.here"),description:n("hr.you"),children:t.jsx("img",{src:F,className:"mx-auto",loading:"lazy",alt:"Salary"})})})]})};export{te as default};
