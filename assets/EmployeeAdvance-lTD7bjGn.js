import{d as A,f as G,b as V,r as s,X as q,a0 as B,W as H,bj as U,v as y,cF as X,cO as J,cG as K,j as t,A as Q,ap as I,L as Y,D as Z,cP as k,G as _,H as $,aq as c}from"./index-C24s9YLx.js";import{N as F}from"./NoCollection-BFjlj1pW.js";const te=()=>{const{t:n}=A(),P=G(),{buttonOn:f}=V(),[o,i]=s.useState(null),[r,v]=s.useState(null),[u,m]=s.useState("*"),[N,D]=s.useState(!1),b=q(),S=B(),x=H(),{filterOn:O}=U(),{data:d}=y(["get-positions"],()=>X(),{revalidateOnFocus:!1,revalidateOnReconnect:!1,keepPreviousData:!0}),W=(d==null?void 0:d.map(e=>({name:e.props.name,value:e.props.id,label:e.props.name})))||[],{data:p,isLoading:E,mutate:j}=y(["get-payments"],()=>J({startPaymentDate:a.startPaymentDate?a.startPaymentDate:"*",endPaymentDate:a.endPaymentDate?a.endPaymentDate:"*",hrWorkerId:a.hrWorkerId,billingMonth:a.billingMonth?a.billingMonth:"*"}),{revalidateOnFocus:!1,revalidateOnReconnect:!1,keepPreviousData:!0}),h=(p==null?void 0:p.map(e=>{var l;return{...e,hrPosition:(l=W.find(R=>R.value===e.hrPositionId))==null?void 0:l.name}}))||[],C={startPaymentDate:o?o.toDate():"*",endPaymentDate:r?r.toDate():"*",hrWorkerId:u,billingMonth:"*",page:x,size:b},[a,T]=s.useState(C),z=e=>{T(l=>({...l,...e})),D(!0),e.startPaymentDate&&i(typeof e.startPaymentDate=="string"?c(e.startPaymentDate):c(e.startPaymentDate)),e.endPaymentDate&&v(typeof e.endPaymentDate=="string"?c(e.endPaymentDate):c(e.endPaymentDate)),e.hrWorkerId&&m(e.hrWorkerId),e.size&&S(e.size)};s.useEffect(()=>{z({startPaymentDate:o==null?void 0:o.toDate(),endPaymentDate:r==null?void 0:r.toDate(),hrWorkerId:u,billingMonth:"*",page:x,size:b})},[O]),s.useEffect(()=>{j().then(()=>D(!1))},[a,j]);const M=()=>{i(null),v(null),m("*")},{data:g}=y(["get-workers"],()=>K({placementId:"*",hrPositionId:"*",organizationId:"*"}),{revalidateOnFocus:!1,revalidateOnReconnect:!1,keepPreviousData:!0}),L=[{name:n("hr.all"),value:"*"},...(g==null?void 0:g.map(e=>({name:e.props.name,value:e.props.id})))||[]];return s.useEffect(()=>{f&&P("/hr/employee/advance/creation")},[f,P]),t.jsxs("div",{children:[t.jsxs(Q,{count:h.length,hideDateTime:!0,hideCity:!0,hideSearch:!0,handleClear:M,children:[t.jsx(I,{title:n("hr.startPaymentDate"),classname:"w-64",value:o,changeValue:e=>i(e)}),t.jsx(I,{title:n("hr.endPaymentDate"),classname:"w-64",value:r,changeValue:e=>i(e)}),t.jsx(Y,{title:n("routes.employees"),classname:"w-full sm:w-80",label:n("warehouse.notSel"),options:L,value:u,onChange:e=>m(e)})]}),E||N?t.jsx(Z,{columnCount:k.length}):h.length>0?t.jsx("div",{className:"mt-8",children:t.jsx(_,{data:h.map((e,l)=>({...e,id:l})),columns:k})}):t.jsx("div",{className:"flex flex-col justify-center items-center",children:t.jsx($,{title:n("hr.here"),description:n("hr.you"),children:t.jsx("img",{src:F,className:"mx-auto",loading:"lazy",alt:"Employee Advance"})})})]})};export{te as default};
