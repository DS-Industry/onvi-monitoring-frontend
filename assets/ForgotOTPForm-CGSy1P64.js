import{d as D,r as o,y as I,z as O,j as s,ac as R,B as V}from"./index-C24s9YLx.js";import{d as C}from"./index-Bs2AcXlY.js";const T=({count:g,setCount:p,forgotObj:c,setForgotObj:d})=>{const{t:a}=D(),[i,f]=o.useState(Array(6).fill("")),[n,h]=o.useState(""),[l,u]=o.useState(!1),b={confirmString:""},[S,j]=o.useState(b),{handleSubmit:y,setValue:E}=I(S),w=(e,t)=>{var r;if(/^[0-9]?$/.test(e)){const m=[...i];if(m[t]=e,f(m),t==5){const x=m.join("");h(x),E("confirmString",x),j(k=>({...k,confirmString:e}))}e&&t<5&&((r=document.getElementById(`otp-${t+1}`))==null||r.focus())}},N=e=>{var t;e>0&&i[e]===""&&((t=document.getElementById(`otp-${e-1}`))==null||t.focus())},{trigger:$,isMutating:F}=O("user/auth/password/valid/confirm",async()=>C({email:c.email,confirmString:`${n.substring(0,3)}-${n.substring(3)}`})),B=async()=>{try{await $()?(d({email:c.email,confirmString:`${n.substring(0,3)}-${n.substring(3)}`}),p(g+1)):u(!0)}catch{u(!0)}};return s.jsxs("div",{children:[s.jsx("p",{className:"text-3xl font-extrabold leading-[1.25] text-text01 mb-1 mt-16",children:a("register.enter")}),s.jsx("p",{className:"font-normal text-text01 text-base",children:a("register.otpEmail")}),s.jsx("p",{className:"font-normal text-text01 text-base mb-5",children:c.email}),s.jsxs("form",{className:"space-y-6",onSubmit:y(B),children:[s.jsx("div",{className:"flex justify-center space-x-4 mt-10",children:i.map((e,t)=>s.jsxs(R.Fragment,{children:[s.jsx("input",{id:`otp-${t}`,type:"text",maxLength:1,value:e,onChange:r=>w(r.target.value,t),onKeyDown:r=>r.key==="Backspace"&&N(t),className:`w-8 h-12 text-center bg-background02 text-text01 border ${l?"border-errorFill":"border-[#E4E5E7]"} rounded-lg text-2xl focus:outline-none`}),t===2&&s.jsx("span",{className:"text-2xl text-[#e4e5e7] font-semibold self-center",children:"-"})]},t))}),l&&s.jsx("p",{className:"text-errorFill text-center mt-2",children:a("register.wrong")}),s.jsx(V,{type:"basic",title:a("register.next"),form:!0,classname:"w-full",isLoading:F}),l&&s.jsx("p",{className:"text-primary02 text-center mt-2",children:a("forgot.send")})]})]})};export{T as default};
