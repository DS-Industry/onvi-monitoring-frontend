import{d as J,q as K,t as U,a2 as Y,r as q,b as Z,v,w as Q,ah as X,bk as _,y as ee,z as ae,dY as se,j as a,A as te,aA as re,D as ne,dZ as W,G as oe,H as le,b9 as ie,J as ce,K as k,L as T,B as D,M as ue}from"./index-C24s9YLx.js";const me=()=>{var b,C,N,S;const{t:s}=J(),F=s("warehouse.all"),o=K(),O=U(),P=Y(),[i,w]=q.useState(P),{buttonOn:R,setButtonOn:A}=Z(),{data:m}=v(["get-pos",o],()=>Q({placementId:o}),{revalidateOnFocus:!1,revalidateOnReconnect:!1,keepPreviousData:!0}),{data:p}=v(["get-worker"],()=>X(),{revalidateOnFocus:!1,revalidateOnReconnect:!1,keepPreviousData:!0}),{data:h,isLoading:E}=v(["get-warehouse",i,o],()=>_({posId:i,placementId:o}),{revalidateOnFocus:!1,revalidateOnReconnect:!1,keepPreviousData:!0}),c=(m==null?void 0:m.map(e=>({name:e.name,value:e.id})))||[],L={name:F,value:"*"};c.unshift(L);const j=(p==null?void 0:p.map(e=>({name:e.name,value:e.id})))||[],g=(h==null?void 0:h.map(e=>{var n,I;return{...e.props,manager:(n=j.find(l=>l.value===e.props.managerId))==null?void 0:n.name,posName:(I=c.find(l=>l.value===e.props.posId))==null?void 0:I.name}}))||[],f={name:"",location:"",managerId:0,posId:0},[t,y]=q.useState(f),{register:u,handleSubmit:V,errors:r,setValue:z,reset:B}=ee(t),{trigger:M,isMutating:$}=ae(["create-warehouse"],async()=>se({name:t.name,location:t.location,managerId:t.managerId,posId:t.posId})),d=(e,n)=>{const l=["managerId","posId"].includes(e)?Number(n):n;y(G=>({...G,[e]:l})),z(e,n)},x=()=>{y(f),B(),A(!R)},H=async()=>{try{if(await M())ue(["get-warehouse",i]),x();else throw new Error("Invalid response from API")}catch(e){console.error("Error during form submission: ",e)}};return a.jsxs("div",{children:[a.jsx(te,{count:g.length,address:o,setAddress:O,hideDateTime:!0,hidePage:!0,hideSearch:!0,handleClear:()=>{w("*")},children:a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-text02",children:s("equipment.carWash")}),a.jsx(re,{className:"w-full sm:w-80 h-10",options:c.map(e=>({label:e.name,value:e.value})),value:i,onChange:e=>w(e)})]})}),E?a.jsx(ne,{columnCount:W.length}):g.length>0?a.jsx("div",{className:"mt-8",children:a.jsx(oe,{data:g,columns:W})}):a.jsx("div",{className:"flex flex-col justify-center items-center",children:a.jsx(le,{title:s("warehouse.noWare"),description:"",children:a.jsx("img",{src:ie,className:"mx-auto",loading:"lazy",alt:"Warehouse"})})}),a.jsx(ce,{onClose:x,children:a.jsxs("form",{className:"space-y-6",onSubmit:V(H),children:[a.jsx("div",{className:"font-semibold text-xl md:text-3xl mb-5 text-text01",children:s("warehouse.ware")}),a.jsx("span",{className:"font-semibold text-sm text-text01",children:s("warehouse.fields")}),a.jsx(k,{title:s("profile.name"),label:s("warehouse.enter"),type:"text",classname:"w-80",value:t.name,changeValue:e=>d("name",e.target.value),error:!!r.name,...u("name",{required:"Name is required"}),helperText:((b=r.name)==null?void 0:b.message)||""}),a.jsx(k,{title:`${s("pos.location")} *`,label:s("warehouse.enter"),type:"text",classname:"w-80",value:t.location,changeValue:e=>d("location",e.target.value),error:!!r.location,...u("location",{required:"Location is required"}),helperText:((C=r.location)==null?void 0:C.message)||""}),a.jsx(T,{title:`${s("warehouse.manager")} *`,label:s("warehouse.notSel"),options:j,classname:"w-64",...u("managerId",{required:"Category Id is required",validate:e=>e!==0||"Category ID is required"}),value:t.managerId,onChange:e=>d("managerId",e),error:!!r.managerId,helperText:(N=r.managerId)==null?void 0:N.message}),a.jsx(T,{title:`${s("marketing.carWash")} *`,label:s("warehouse.notSel"),options:c,classname:"w-64",...u("posId",{required:"Category Id is required",validate:e=>e!==0||"Category ID is required"}),value:t.posId,onChange:e=>d("posId",e),error:!!r.posId,helperText:(S=r.posId)==null?void 0:S.message}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx(D,{title:s("organizations.cancel"),type:"outline",handleClick:()=>{x()}}),a.jsx(D,{title:s("organizations.save"),form:!0,isLoading:$,handleClick:()=>{}})]})]})})]})};export{me as default};
