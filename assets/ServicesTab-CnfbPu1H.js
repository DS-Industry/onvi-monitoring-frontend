import{d as q,f as N,y as V,r as i,a9 as M,z as U,j as e,K as d,B as C}from"./index-C24s9YLx.js";import{a as I}from"./index-Bs2AcXlY.js";const F=()=>{var c,u,m;const{t:r}=q(),l={password:"",newPassword:"",confirmPassword:""},P=N(),{register:t,handleSubmit:g,errors:a,setValue:h}=V(l),[o,x]=i.useState(l),[y,w]=i.useState(!1),[v,p]=i.useState(""),j=M(),n=(s,f)=>{x(E=>({...E,[s]:f})),h(s,f)},{trigger:b,isMutating:S}=U("user/password",async()=>I({oldPassword:o.password,newPassword:o.confirmPassword})),T=async()=>{try{const s=await b();if(s)j({user:s==null?void 0:s.props}),w(!1),p(""),P("/");else throw new Error("Invalid password. Please try again.")}catch{w(!0),p("Enter the correct password.")}};return e.jsxs("form",{className:"space-y-6",onSubmit:g(T),children:[e.jsx("div",{children:e.jsx(d,{type:"password",title:r("profile.current"),value:o.password,label:r("profile.enterCurrent"),changeValue:s=>n("password",s.target.value),...t("password",{required:"пароль is required"}),disabled:!1,inputType:"primary",classname:"w-80",error:!!a.password||!!y,helperText:((c=a.password)==null?void 0:c.message)||v||""})}),e.jsx("div",{children:e.jsx(d,{type:"password",value:o.newPassword,title:r("profile.new"),label:r("profile.createNew"),changeValue:s=>n("newPassword",s.target.value),...t("newPassword",{required:"New password is required"}),disabled:!1,inputType:"primary",classname:"w-80",error:!!a.newPassword,helperText:(u=a.newPassword)==null?void 0:u.message})}),e.jsx("div",{children:e.jsx(d,{type:"password",value:o.confirmPassword,title:r("profile.confirm"),label:r("profile.confirmNew"),changeValue:s=>n("confirmPassword",s.target.value),...t("confirmPassword",{required:"Confirmation is required",validate:s=>s===o.newPassword||"Passwords do not match"}),disabled:!1,inputType:"primary",classname:"w-80",error:!!a.confirmPassword,helperText:(m=a.confirmPassword)==null?void 0:m.message})}),e.jsx("div",{className:"flex",children:e.jsx(C,{form:!0,title:r("profile.changePass"),classname:"mt-5",isLoading:S})})]})};export{F as default};
