import{d as R,r as t,f as U,z as V,a9 as z,aa as B,ab as H,y as _,l as A,j as e,F as K,K as h,B as W,u as $,s as G}from"./index-C24s9YLx.js";import{l as J}from"./index-Bs2AcXlY.js";import{O as Q}from"./onvi_blue-CugkZB1f.js";const X="/assets/LoginImage-Ehyx75O_.png",se=()=>{var x,p;const{t:s}=R(),[f,c]=t.useState(!1),[w,m]=t.useState(!1),[j,v]=t.useState(""),[b,E]=t.useState(""),n=U(),y=a=>{a.preventDefault(),n("/register")},N=a=>{a.preventDefault(),n("/forgotPassword")},P={loginEmail:"",loginPassword:""},[l,S]=t.useState(P),{trigger:k,isMutating:I}=V("user/auth/login",async()=>J({email:l.loginEmail,password:l.loginPassword})),D=z(),F=B(),L=H(),{register:g,handleSubmit:M,errors:i,setValue:T}=_(l),d=(a,r)=>{S(o=>({...o,[a]:r})),T(a,r)},q=async a=>{a.loginEmail||c(!0),a.loginPassword||m(!0);try{const r=await k();if(r&&r.admin&&r.tokens){const{admin:o,tokens:C,permissionInfo:O}=r;D({user:o==null?void 0:o.props}),L({tokens:C}),$.getState().setPermissions(O.permissions),n("/")}else throw new Error(s("Invalid email or password. Please try again."))}catch(r){console.error("Login error:",r),c(!0),m(!0),v(s("Please enter correct Email Id.")),E(s("Please enter correct Password.")),F()}},{showSnackbar:u}=A();return t.useEffect(()=>{G(u)},[u]),e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background02 p-4",children:e.jsxs("div",{className:"flex flex-col rounded-lg p-8 lg:flex-row md:p-0",children:[e.jsxs("div",{className:"lg:w-5/12 p-8 lg:ml-40",children:[e.jsxs("div",{className:"flex text-primary02 mb-5",children:[e.jsx(K,{icon:"arrow-left"}),e.jsx("p",{children:s("login.back")})]}),e.jsxs("div",{className:"flex mb-5",children:[e.jsx("img",{src:Q,className:"h-7 w-14",loading:"lazy",alt:"Onvi"}),e.jsx("div",{className:"text-primary02 font-semibold text-xs items-center justify-center flex ml-2",children:s("login.business")})]}),e.jsx("h1",{className:"text-2xl font-extrabold leading-[1.25] text-text01 mb-2",children:s("login.welcome")}),e.jsx("p",{className:"text-text01 mb-6",children:s("login.glad")}),e.jsxs("form",{onSubmit:M(q),className:"space-y-6",children:[e.jsx("div",{children:e.jsx(h,{type:"text",label:"Email",title:"Email",value:l.loginEmail,changeValue:a=>d("loginEmail",a.target.value),error:!!i.loginEmail||!!f,...g("loginEmail",{required:"Email is required",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Invalid email format"}}),helperText:((x=i.loginEmail)==null?void 0:x.message)||j||""})}),e.jsx("div",{children:e.jsx(h,{type:"password",label:s("login.password"),title:s("login.password"),value:l.loginPassword,changeValue:a=>d("loginPassword",a.target.value),error:!!i.loginPassword||!!w,...g("loginPassword",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}}),helperText:((p=i.loginPassword)==null?void 0:p.message)||b||""})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"checkbox",className:"rounded text-primary02 border-gray-300 focus:ring-indigo-500"}),e.jsx("span",{className:"ml-2 text-sm text-text02",children:s("login.remember")})]}),e.jsx("span",{className:"text-sm text-primary02 cursor-pointer hover:text-primary02_Hover",onClick:N,children:s("login.forgot")})]}),e.jsx(W,{type:"basic",title:s("login.login"),form:!0,isLoading:I,classname:"w-full"})]}),e.jsxs("p",{className:"mt-6 text-center text-sm text-text02",children:[s("login.dont")," ",e.jsx("span",{className:"text-primary02 hover:text-primary02_Hover font-medium cursor-pointer",onClick:y,children:s("login.register")})]})]}),e.jsx("div",{className:"hidden lg:flex lg:w-8/12 rounded-r-lg lg:ml-20",children:e.jsx("div",{className:"p-8",children:e.jsx("img",{src:X,alt:"Rocket illustration",loading:"lazy",decoding:"async",className:"object-cover w-11/12 h-11/12"},"login-image")})})]})})};export{se as default};
