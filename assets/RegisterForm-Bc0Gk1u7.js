import{d as I,r as f,y as F,z as M,j as a,K as n,aP as R,aq as Y,B as k}from"./index-C24s9YLx.js";import{r as B}from"./index-Bs2AcXlY.js";const L=({count:v,setCount:w,setRegisterObj:b})=>{var d,m,u,c,h,g,x;const{t}=I(),[o,j]=f.useState(!1),y={name:"",surname:"",middlename:"",email:"",password:"",confirmPassword:"",birthday:"",phone:""},[s,q]=f.useState(y),{register:i,handleSubmit:P,errors:r,setValue:N}=F(s),{trigger:T,isMutating:$}=M(["user-auth-register"],async()=>B({name:s.name,surname:s.surname,middlename:s.middlename,birthday:new Date(`${s.birthday}T13:24:45.742+03:00`),phone:s.phone,email:s.email,password:s.password})),l=(e,p)=>{q(D=>({...D,[e]:p})),N(e,p)},V=()=>{j(!o)},S=async()=>{try{await T()&&(b({email:s.email}),w(v+1))}catch(e){console.error("Register error:",e)}};return a.jsxs("div",{children:[a.jsx("p",{className:"text-3xl font-extrabold leading-[1.25] text-text01 mb-2",children:t("register.join")}),a.jsxs("form",{className:"space-y-6",onSubmit:P(S),children:[a.jsxs("div",{className:"overflow-y-auto space-y-6 pr-6 h-96",children:[a.jsxs("div",{children:[a.jsx(n,{type:"text",title:`${t("register.username")} *`,value:s.name,changeValue:e=>l("name",e.target.value),error:!!r.name,...i("name",{required:"Name is required"}),helperText:((d=r.name)==null?void 0:d.message)||""}),a.jsx("label",{className:"text-xs text-text02 mb-5",children:t("register.other")})]}),a.jsx(n,{type:"text",title:t("profile.middlename"),value:s.middlename,changeValue:e=>l("middlename",e.target.value),...i("middlename")}),a.jsx(n,{type:"text",title:`${t("profile.surname")} *`,value:s.surname,changeValue:e=>l("surname",e.target.value),error:!!r.surname,...i("surname",{required:"Surname is required"}),helperText:((m=r.surname)==null?void 0:m.message)||""}),a.jsx(n,{type:"password",title:`${t("login.password")} *`,value:s.password,changeValue:e=>l("password",e.target.value),error:!!r.password,...i("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}}),helperText:((u=r.password)==null?void 0:u.message)||""}),a.jsx(n,{type:"password",title:`${t("profile.confirm")} *`,value:s.confirmPassword,changeValue:e=>l("confirmPassword",e.target.value),error:!!r.confirmPassword,...i("confirmPassword",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"},validate:e=>e===s.password||"Passwords do not match"}),helperText:((c=r.confirmPassword)==null?void 0:c.message)||""}),a.jsx(R,{title:`${t("register.date")} *`,classname:"w-40",id:"date-input",value:s.birthday?Y(s.birthday):null,changeValue:e=>l("birthday",e?e.format("YYYY-MM-DDTHH:mm"):""),error:!!r.birthday,...i("birthday",{required:"Birthday is required"}),helperText:((h=r.birthday)==null?void 0:h.message)||""}),a.jsx(n,{type:"text",title:`${t("register.phone")} *`,value:s.phone,changeValue:e=>l("phone",e.target.value),error:!!r.phone,...i("phone",{required:"Phone is required",pattern:{value:/^\+79\d{9}$/,message:"Phone number must start with +79 and be 11 digits long"}}),helperText:((g=r.phone)==null?void 0:g.message)||""}),a.jsx(n,{type:"text",title:`${t("register.email")} *`,value:s.email,changeValue:e=>l("email",e.target.value),error:!!r.email,...i("email",{required:"Email is required",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Invalid email format"}}),helperText:((x=r.email)==null?void 0:x.message)||""})]}),a.jsx("div",{className:`h-32 ${o?"bg-background06":"bg-disabledFill"}`,children:a.jsx("div",{className:"flex ml-5",children:a.jsxs("div",{className:"mt-5 flex",children:[a.jsx("div",{children:a.jsx("div",{onClick:V,className:`w-10 h-5 flex items-center rounded-full cursor-pointer transition-colors duration-300 relative ${o?"bg-primary02":"bg-opacity01"}`,children:a.jsx("div",{className:`bg-white w-4 h-4 rounded-full shadow-md transform transition-transform duration-300 ${o?"translate-x-6":"translate-x-0"}`})})}),a.jsxs("div",{className:"ml-5",children:[a.jsx("div",{className:"text-text01 text-lg font-semibold",children:t("register.request")}),a.jsx("div",{className:"text-text01 font-normal text-sm",children:t("register.after")})]})]})})}),a.jsx(k,{type:"basic",title:t("register.next"),form:!0,classname:"w-full",isLoading:$})]})]})};export{L as default};
