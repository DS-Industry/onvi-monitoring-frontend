import{d,r as s,b as p,f as b,v,j as t,D as x,c8 as i,G as h}from"./index-C24s9YLx.js";import{N as j}from"./Notification-KpAXhuNN.js";import{e as D}from"./index-BZ4ih03c.js";const P=()=>{const{t:a}=d(),[l,u]=s.useState(!0),{buttonOn:r}=p(),n=b(),[c,m]=s.useState(0);s.useEffect(()=>{m(Date.now())},[]),s.useEffect(()=>{r&&n("/marketing/loyalty/rewards",{state:{ownerId:0}})},[n,r]);const{data:o,isLoading:g}=v(["get-loyalty-programs",c],()=>D(),{revalidateOnFocus:!1,revalidateOnReconnect:!1,keepPreviousData:!0}),f=(o==null?void 0:o.map(e=>({...e.props,status:a(`tables.${e.props.status}`)})))||[];return t.jsxs("div",{className:"mt-2",children:[l&&t.jsx(j,{title:a("routes.loyalty"),message:a("marketing.promotion"),showBonus:!0,onClose:()=>u(!1)}),t.jsx("div",{className:"mt-8",children:g?t.jsx(x,{columnCount:i.length}):t.jsx(h,{data:f.sort((e,y)=>new Date(y.startDate).getTime()-new Date(e.startDate).getTime()),columns:i,navigableFields:[{key:"name",getPath:()=>"/marketing/loyalty/bonus"}]})})]})};export{P as default};
