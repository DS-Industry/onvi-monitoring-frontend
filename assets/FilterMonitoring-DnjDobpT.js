import{d as ae,a2 as se,bh as ne,U as le,V as oe,bj as re,c as de,b as ie,r as s,a5 as W,R as ce,Y as ue,q as xe,t as he,bi as me,Z as pe,_ as ve,X as fe,a0 as ge,W as we,v as je,x as De,j as e,I as Ie,bL as Y,aA as l,bM as ye,B as $}from"./index-C24s9YLx.js";const{Search:be}=Ie,Se=({count:F,organizationsSelect:x,posesSelect:o,devicesSelect:r,wareHousesSelect:d,usersSelect:h,handleDataFilter:m,hideCity:k=!1,hideSearch:z=!1,hideReset:B=!1,loadingPos:q})=>{const i=new Date().toISOString().slice(0,10),{t:a}=ae(),A=a("warehouse.all"),g=se(),M=ne(),G=le(),L=oe(),{filterOn:p,setFilterOn:w}=re(),{filterOpen:j}=de(),{buttonOn:D}=ie(),n=s.useRef(null),[c,I]=s.useState(G),[u,y]=s.useState(L),[U,b]=s.useState(""),V=g,X=W(),[N,C]=s.useState(M),S=ce(),E=ue(),O=xe(),P=he(),R=W(),Z=me(),_=pe(),J=ve(),v=fe(),K=ge(),H=we(),Q=t=>{I(t)},ee=t=>{y(t)},{data:f}=je(["get-city"],()=>De(),{revalidateOnFocus:!1,revalidateOnReconnect:!1,keepPreviousData:!0}),T=(f==null?void 0:f.map(t=>({name:t.region,value:t.id})))||[],te={name:A,value:"*"};return T.unshift(te),s.useEffect(()=>{j&&!D?n.current&&(n.current.style.maxHeight=`${n.current.scrollHeight}px`):n.current&&(n.current.style.maxHeight="0")},[j,D]),s.useEffect(()=>{o&&m({dateStart:c,dateEnd:u,posId:V,page:H,size:v,placementId:O}),r&&m({dateStart:c,dateEnd:u,deviceId:S,page:H,size:v}),d&&m({dateStart:c,dateEnd:u,warehouseId:N})},[p]),e.jsxs("div",{ref:n,className:"overflow-hidden transition-all duration-500 ease-in-out max-h-0",children:[e.jsxs("div",{className:"flex flex-wrap gap-4",children:[!z&&e.jsx(be,{placeholder:"Поиск",className:"w-full sm:w-80"}),!k&&e.jsx(Y,{title:a("pos.city"),classname:"w-full sm:w-80",options:T,value:O,onChange:P}),x&&x.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-text02",children:a("analysis.organizationId")}),e.jsx(l,{className:"w-full sm:w-80",placeholder:"Выберите организацию",options:x.map(t=>({label:t.name,value:t.value})),value:U,onChange:b,dropdownRender:t=>e.jsx("div",{style:{maxHeight:100,overflowY:"auto"},children:t})})]}),o&&o.length>0&&e.jsx(Y,{title:a("analysis.posId"),classname:"w-full sm:w-80",placeholder:"Выберите объект",options:o,value:g,onChange:R,loading:q}),h&&h.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-text02",children:a("equipment.user")}),e.jsx(l,{className:"w-full sm:w-80 h-10",placeholder:"Выберите пользователя",options:h.map(t=>({label:t.name,value:t.value})),dropdownRender:t=>e.jsx("div",{style:{maxHeight:100,overflowY:"auto"},children:t})})]}),r&&r.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-text02",children:a("analysis.deviceId")}),e.jsx(l,{className:"w-full sm:w-80 h-10",placeholder:"Выберите устройство",options:r.map(t=>({label:t.name,value:t.value})),value:S,onChange:E,dropdownRender:t=>e.jsx("div",{style:{maxHeight:100,overflowY:"auto"},children:t})})]}),d&&d.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-text02",children:a("analysis.warehouseId")}),e.jsx(l,{className:"w-full sm:w-80 h-10",placeholder:"Введите название склада",options:d.map(t=>({label:t.name,value:t.value})),value:N,onChange:C,dropdownRender:t=>e.jsx("div",{style:{maxHeight:100,overflowY:"auto"},children:t})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-text02",children:a("tables.lines")}),e.jsx(l,{className:"w-24 h-10",options:[{label:15,value:15},{label:50,value:50},{label:100,value:100},{label:120,value:120}],value:v,onChange:K,dropdownRender:t=>e.jsx("div",{style:{maxHeight:100,overflowY:"auto"},children:t})})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(ye,{onStartDateChange:Q,onEndDateChange:ee,defaultDateStart:c,defaultDateEnd:u})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mt-4",children:[!B&&e.jsx($,{title:"Сбросить",type:"outline",handleClick:()=>{I(new Date(`${i} 00:00`)),y(new Date(`${i} 23:59`)),X("*"),C("*"),b(""),E(void 0),R("*"),Z("*"),P("*"),_(new Date(`${i} 00:00`)),J(new Date(`${i} 23:59`)),w(!p)},classname:"w-[168px]"}),e.jsx($,{title:"Применить",form:!0,handleClick:()=>w(!p),classname:"w-[168px]"}),e.jsxs("p",{className:"font-semibold",children:["Найдено: ",F]})]})]})};export{Se as F};
