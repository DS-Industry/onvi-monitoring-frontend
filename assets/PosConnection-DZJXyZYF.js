import{d as C,r,g as O,l as R,v as p,ah as T,z as D,j as s,bL as E,B as F,F as g}from"./index-C24s9YLx.js";import{h as W,i as A,j as U}from"./index-Dx68t6LI.js";const L=()=>{const{t:o}=C(),[a,h]=r.useState([]),[c,m]=r.useState([]),[l,i]=r.useState([]),j=O(),[d,w]=r.useState(j.id),{showSnackbar:b}=R(),{data:u}=p(["get-pos-permission"],()=>W(),{revalidateOnFocus:!1,revalidateOnReconnect:!1,keepPreviousData:!0}),{data:n}=p(["get-pos-permission-user",d],()=>A(d),{revalidateOnFocus:!1,revalidateOnReconnect:!1,keepPreviousData:!0}),{data:x}=p(["get-worker"],()=>T(),{revalidateOnFocus:!1,revalidateOnReconnect:!1,keepPreviousData:!0}),{trigger:k,isMutating:N}=D(["connect-pos"],async()=>U({posIds:a},d)),y=(x==null?void 0:x.map(e=>({name:e.name+" "+e.middlename+" "+e.surname,value:e.id})))||[];r.useEffect(()=>{n&&i(n)},[n]),r.useEffect(()=>{if(u&&n){const e=u.filter(t=>!n.some(f=>f.id===t.id));m(e),i(n)}},[u,n]),r.useEffect(()=>{h(l.map(e=>e.id))},[l]);const P=()=>{const e=c.filter(t=>a.includes(t.id));m(c.filter(t=>!a.includes(t.id))),i([...l,...e])},S=()=>{const e=l.filter(t=>a.includes(t.id));i(l.filter(t=>!a.includes(t.id))),m([...c,...e])},v=e=>{h(t=>t.includes(e)?t.filter(f=>f!==e):[...t,e])},I=async()=>{try{await k()&&b(o("analysis.the"),"success")}catch{b("The operation is unsuccessful","error")}};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row space-x-0 sm:space-x-2 items-center",children:[s.jsx(E,{title:o("equipment.user"),options:y,classname:"w-full sm:w-72",value:d,onChange:e=>w(e),allowClear:!0}),s.jsx(F,{title:o("organizations.save"),isLoading:N,handleClick:I,classname:"h-10 mt-2 sm:mt-5 w-full sm:w-auto"})]}),s.jsxs("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4",children:[s.jsxs("div",{className:"border rounded w-full md:w-1/3",children:[s.jsxs("div",{className:"flex border-b-[1px] bg-background05 text-xs",children:[s.jsx("div",{className:"font-normal text-text01 p-2",children:o("analysis.branch")}),s.jsx("div",{className:"ml-auto mr-2 text-text01 p-2",children:c.length})]}),s.jsx("div",{className:"border-b-[1px] h-64 md:h-96 overflow-y-auto w-full",children:c.map(e=>s.jsx("div",{onClick:()=>v(e.id),className:`border-b-[1px] text-text01 pl-3 p-1 cursor-pointer ${a.includes(e.id)?"bg-background06":"hover:bg-background06"}`,children:s.jsx("div",{className:"font-light text-[11px]",children:e.name})},e.id))})]}),s.jsxs("div",{className:"flex flex-row md:flex-col max-w-full md:max-w-96 justify-center items-center my-2 space-x-2 md:space-x-0 md:space-y-2",children:[s.jsx("button",{className:"border border-b-0 bg-white text-black cursor-pointer p-2",onClick:P,disabled:a.length===0,title:"→",children:s.jsx(g,{icon:"chevrons-right"})}),s.jsx("button",{className:"border border-t-0 bg-white text-black cursor-pointer p-2",onClick:S,disabled:a.length===0,title:"←",children:s.jsx(g,{icon:"chevrons-left"})})]}),s.jsxs("div",{className:"border rounded w-full md:w-1/3",children:[s.jsxs("div",{className:"flex border-b-[1px] bg-background05 text-xs",children:[s.jsx("div",{className:"font-normal text-text01 p-2",children:o("analysis.added")}),s.jsx("div",{className:"ml-auto mr-2 text-text01 p-2",children:l.length})]}),s.jsx("div",{className:"border-b-[1px] h-64 md:h-96 overflow-y-auto w-full",children:l.map(e=>s.jsx("div",{onClick:()=>v(e.id),className:`border-b-[1px] text-text01 pl-3 p-1 cursor-pointer ${a.includes(e.id)?"bg-background06":"hover:bg-background06"}`,children:s.jsx("div",{className:"text-[11px] font-light",children:e.name})},e.id))})]})]})]})};export{L as default};
