import{d as J,b as K,r as h,q as U,v as P,cF as W,y as A,z as w,cJ as G,cK as Q,j as t,D as $,cL as N,G as X,H as Y,J as Z,K as _,L as ee,Q as te,B as E,M as C}from"./index-C24s9YLx.js";import{P as se}from"./NoPosition-Bk4hTKpm.js";import{g as ae}from"./index-Dx68t6LI.js";const re=()=>{var b,y;const{t:s}=J(),{buttonOn:f,setButtonOn:l}=K(),[n,I]=h.useState(!1),[j,v]=h.useState(0),D=U(),{data:d}=P(["get-organization"],()=>ae({placementId:D}),{revalidateOnFocus:!1,revalidateOnReconnect:!1,keepPreviousData:!0}),O=(d==null?void 0:d.map(e=>({name:e.name,value:e.id})))||[],{data:c,isLoading:S,isValidating:F}=P(["get-positions"],()=>W(),{revalidateOnFocus:!1,revalidateOnReconnect:!1,keepPreviousData:!0}),z={name:"",organizationId:0,description:void 0},[a,u]=h.useState(z),{register:m,handleSubmit:M,errors:o,setValue:T,reset:k}=A(a),{trigger:q,isMutating:L}=w(["create-position"],async()=>G({name:a.name,organizationId:a.organizationId,description:a.description})),{trigger:R,isMutating:V}=w(["update-position"],async()=>Q({positionId:j,description:a.description})),p=(e,i)=>{u(x=>({...x,[e]:i})),T(e,i)},B=e=>{v(e),I(!0),l(!0);const i=g.find(x=>x.id===e);i&&u({name:i.name,organizationId:i.organizationId,description:i.description})},r=()=>{u(z),I(!1),k(),v(0),l(!f)},H=async()=>{try{if(j)if(await R())C(["get-positions"]),r();else throw new Error("Invalid update data.");else if(await q())C(["get-positions"]),r();else throw new Error("Invalid response from API")}catch(e){console.error("Error during form submission: ",e)}},g=(c==null?void 0:c.map(e=>e.props))||[];return t.jsxs("div",{children:[S||F?t.jsx($,{columnCount:N.length}):g.length>0?t.jsx("div",{className:"mt-8",children:t.jsx(X,{data:g,columns:N,onEdit:B})}):t.jsx("div",{className:"flex flex-col justify-center items-center",children:t.jsx(Y,{title:s("hr.no"),description:s("hr.create"),children:t.jsx("img",{src:se,className:"mx-auto",loading:"lazy",alt:"Positions"})})}),t.jsx(Z,{onClose:r,children:t.jsxs("form",{className:"space-y-6",onSubmit:M(H),children:[t.jsx("div",{className:"font-semibold text-xl md:text-3xl mb-5 text-text01",children:s("hr.pos")}),t.jsxs("div",{className:"flex",children:[t.jsx("span",{className:"font-semibold text-sm text-text01",children:s("routine.fields")}),t.jsx("span",{className:"text-errorFill",children:"*"}),t.jsx("span",{className:"font-semibold text-sm text-text01",children:s("routine.are")})]}),t.jsx(_,{title:`${s("hr.name")}*`,label:s("hr.enter"),type:"text",classname:"w-80",value:a.name,changeValue:e=>p("name",e.target.value),error:!!o.name,...m("name",{required:!n&&"Name is required"}),helperText:((b=o.name)==null?void 0:b.message)||"",disabled:n}),t.jsx(ee,{title:s("warehouse.organization"),options:O,classname:"w-64",...m("organizationId",{required:"Organization Id is required",validate:e=>e!==0||"Organization Id is required"}),value:a.organizationId,onChange:e=>p("organizationId",e),error:!!o.organizationId,helperText:(y=o.organizationId)==null?void 0:y.message,isDisabled:n}),t.jsx(te,{title:s("warehouse.desc"),label:s("hr.about"),classname:"w-80",inputType:"secondary",value:a.description,changeValue:e=>p("description",e.target.value),...m("description")}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-4 mt-6",children:[t.jsx(E,{title:s("organizations.cancel"),type:"outline",handleClick:()=>{l(!f),r()}}),t.jsx(E,{title:s(n?"hr.update":"hr.pos"),form:!0,isLoading:n?V:L,handleClick:()=>{}})]})]})})]})};export{re as default};
