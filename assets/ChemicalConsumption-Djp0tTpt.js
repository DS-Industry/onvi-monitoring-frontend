import{d as b,r as p,a2 as L,U as A,V as M,a5 as W,Z as F,_ as H,q as N,v as h,ar as U,w as $,j as e,D as k,as as f,G as V,H as q}from"./index-C24s9YLx.js";import{S as w}from"./NoEquipment-BCMrYMdq.js";import{F as z}from"./FilterMonitoring-DnjDobpT.js";const B=n=>n.map(c=>{const s={period:c.period};return c.techRateInfos.forEach(a=>{const o={SOAP:"Вода + шампунь",PRESOAK:"Активная химия",TIRE:"Мойка дисков",BRUSH:"Щетка + пена",WAX:"Воск + защита",TPOWER:"T-POWER"}[a.code];o&&(s[`${o}, факт`]=a.spent,s[`${o}, время`]=a.time,s[`${o}, пересчет`]=a.recalculation)}),s}),_=()=>{const{t:n}=b(),c=n("warehouse.all"),[s,a]=p.useState(!1),i=L(),o=A(),E=M(),x=W(),T=F(),I=H(),l=N(),R={dateStart:o.toString().slice(0,10),dateEnd:E.toString().slice(0,10),posId:i,placementId:l},[d,P]=p.useState(R),D=t=>{P(m=>({...m,...t})),a(!0),t.posId&&x(t.posId),t.dateStart&&T(new Date(t.dateStart)),t.dateEnd&&I(new Date(t.dateEnd))},{data:v,isLoading:j,mutate:g}=h(i!=="*"?["get-chemical-consumption"]:null,()=>U({dateStart:d.dateStart,dateEnd:d.dateEnd,posId:i,placementId:l}),{revalidateOnFocus:!1,revalidateOnReconnect:!1,keepPreviousData:!0}),{data:r,isLoading:y,isValidating:C}=h(["get-pos",l],()=>$({placementId:l}),{revalidateOnFocus:!1,revalidateOnReconnect:!1,keepPreviousData:!0});p.useEffect(()=>{g().then(()=>a(!1))},[d,g]);const u=B(v||[]),S=(r==null?void 0:r.map(t=>({name:t.name,value:t.id})))||[],O={name:c,value:"*"};return S.unshift(O),e.jsxs(e.Fragment,{children:[e.jsx(z,{count:u.length,posesSelect:S,handleDataFilter:D,hideSearch:!0,loadingPos:y||C}),s||j?e.jsx(k,{columnCount:f.length}):u.length>0?e.jsx("div",{className:"mt-8",children:e.jsx(V,{data:u.map((t,m)=>({...t,id:m})),columns:f,isDisplayEdit:!0})}):e.jsx(q,{title:n("chemical.noText"),description:n("chemical.dont"),children:e.jsx("img",{src:w,className:"mx-auto",loading:"lazy",alt:"CHEMICAL"})})]})};export{_ as default};
