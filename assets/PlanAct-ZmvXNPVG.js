import{d as H,e as X,r as o,a2 as Z,U as _,V as B,q as J,a5 as K,Z as Q,_ as Y,t as F,W as w,X as ee,$ as te,a0 as se,a1 as ae,v,w as oe,j as s,D as ne,cD as j,G as ce,H as ie}from"./index-C24s9YLx.js";import{N as de}from"./NoCollection-BFjlj1pW.js";import{f as le}from"./index-BzKdJFVM.js";import{F as ue}from"./FilterMonitoring-DnjDobpT.js";const Se=()=>{var E;const{t:l}=H(),C=l("warehouse.all"),P=new Date().toISOString().slice(0,10),x=X(),[T,h]=o.useState(!1),N=Z(),z=_(),b=B(),u=J(),D=K(),O=Q(),L=Y(),R=F(),d=w(),r=ee(),i=te(),k=se(),I=ae(),A={dateStart:z||`${P} 00:00`,dateEnd:b||`${P} 23:59`,posId:N||((E=x.state)==null?void 0:E.ownerId),placementId:u,page:d,size:r},[a,p]=o.useState(A);o.useEffect(()=>{i(1),p(e=>({...e,page:1}))},[x,i]);const{data:t,error:M,isLoading:m,mutate:y}=v(["get-pan-fact"],()=>le({dateStart:a.dateStart,dateEnd:a.dateEnd,posId:a==null?void 0:a.posId,placementId:a==null?void 0:a.placementId,page:d,size:r}),{revalidateOnFocus:!1,revalidateOnReconnect:!1,keepPreviousData:!0}),{data:g,isLoading:$,isValidating:U}=v(["get-pos",u],()=>oe({placementId:u}),{revalidateOnFocus:!1,revalidateOnReconnect:!1,keepPreviousData:!0}),V=(t==null?void 0:t.totalCount)||0,n=Math.ceil(V/r);o.useEffect(()=>{d>n&&(i(n>0?n:1),p(e=>({...e,page:n>0?n:1})))},[n,d,i]);const W=e=>{p(c=>({...c,...e})),h(!0),e.posId&&D(e.posId),e.dateStart&&O(e.dateStart),e.dateEnd&&L(e.dateEnd),e.placementId&&R(e.placementId),e.page&&i(e.page),e.size&&k(e.size)};o.useEffect(()=>{},[M]),o.useEffect(()=>{y().then(()=>h(!1))},[a,y]),o.useEffect(()=>{!m&&(t!=null&&t.totalCount)&&I(t==null?void 0:t.totalCount)},[t,m,I]);const f=(g==null?void 0:g.map(e=>({name:e.name,value:e.id})))||[],q={name:C,value:"*"};f.unshift(q);const S=(t==null?void 0:t.plan.map(e=>{var c;return{...e,posName:(c=f.find(G=>G.value===e.posId))==null?void 0:c.name}}))||[];return s.jsxs("div",{children:[s.jsx(ue,{count:S.length,posesSelect:f,handleDataFilter:W,hideSearch:!0,loadingPos:$||U}),T||m?s.jsx("div",{className:"mt-8 space-y-6",children:s.jsx("div",{children:s.jsx(ne,{columnCount:j.length})})}):S.length>0?s.jsx("div",{className:"mt-8 space-y-6",children:s.jsx(ce,{data:S.map((e,c)=>({id:c,...e})),columns:j,showPagination:!0})}):s.jsx("div",{className:"flex flex-col justify-center items-center",children:s.jsx(ie,{title:l("pos.thisSeg"),description:l("pos.youDo"),children:s.jsx("img",{src:de,className:"mx-auto",loading:"lazy",alt:"Plan Act"})})})]})};export{Se as default};
