import{d as q,b as A,f as G,a2 as H,U as X,V as Z,W as _,X as J,e as K,a5 as Q,Z as Y,_ as ee,$ as te,a1 as ae,r as s,v as m,cl as se,q as ne,w as oe,ah as ie,j as a,D as ce,cm as I,G as re,H as de}from"./index-C24s9YLx.js";import{N as ue}from"./NoTimesheet-oebUSuv9.js";import{F as le}from"./FilterMonitoring-DnjDobpT.js";const Se=()=>{const{t:i}=q(),P=i("warehouse.all"),T=new Date().toISOString().slice(0,10),{buttonOn:p}=A(),S=G(),j=H(),N=X(),C=Z(),b=_(),O=J(),k=K(),z=Q(),L=Y(),R=ee(),h=te(),v=ae(),[w,E]=s.useState(!1),B={dateStart:N.toString().slice(0,10)||"2024-01-01",dateEnd:C.toString().slice(0,10)||`${T}`,page:b,size:O,posId:j||1};s.useEffect(()=>{h(1),x(e=>({...e,page:1}))},[k,h]);const[n,x]=s.useState(B),{data:t,error:F,isLoading:c,mutate:y}=m(["get-shifts"],()=>se({dateStart:new Date(n.dateStart),dateEnd:new Date(n.dateEnd),posId:n.posId,placementId:r,page:n.page,size:n.size})),W=e=>{x(o=>({...o,...e})),E(!0),e.posId&&z(e.posId),e.dateStart&&L(new Date(e.dateStart)),e.dateEnd&&R(new Date(e.dateEnd))};s.useEffect(()=>{},[F]),s.useEffect(()=>{y().then(()=>E(!1))},[n,y]),s.useEffect(()=>{!c&&(t!=null&&t.totalCount)&&v(t==null?void 0:t.totalCount)},[t==null?void 0:t.totalCount,c,v]);const r=ne(),{data:d,isLoading:M,isValidating:U}=m(["get-pos",r],()=>oe({placementId:r}),{revalidateOnFocus:!1,revalidateOnReconnect:!1,keepPreviousData:!0}),{data:u}=m(["get-worker"],()=>ie(),{revalidateOnFocus:!1,revalidateOnReconnect:!1,keepPreviousData:!0}),l=(d==null?void 0:d.map(e=>({name:e.name,value:e.id})))||[],V={name:P,value:"*"};l.unshift(V);const $=(u==null?void 0:u.map(e=>({name:e.name,value:e.id})))||[];s.useEffect(()=>{p&&S("/finance/timesheet/creation",{state:{ownerId:0}})},[p,S]);const g=(t==null?void 0:t.shiftReportsData.map(e=>{var o,D;return{...e,posName:((o=l.find(f=>f.value===e.posId))==null?void 0:o.name)||"-",createdByName:((D=$.find(f=>f.value===e.createdById))==null?void 0:D.name)||"-"}}))||[];return a.jsxs("div",{children:[a.jsx(le,{count:g.length,posesSelect:l,hideSearch:!0,handleDataFilter:W,loadingPos:M||U}),w||c?a.jsx(ce,{columnCount:I.length}):g.length>0?a.jsx("div",{className:"mt-8",children:a.jsx(re,{data:g,columns:I,isDisplayEdit:!0,showPagination:!0,navigableFields:[{key:"posName",getPath:()=>"/finance/timesheet/creation"}]})}):a.jsx("div",{className:"flex flex-col justify-center items-center",children:a.jsx(de,{title:i("finance.data"),description:i("finance.atThe"),children:a.jsx("img",{src:ue,className:"mx-auto",loading:"lazy",alt:"No Timesheet"})})})]})};export{Se as default};
