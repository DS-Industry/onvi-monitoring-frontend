import{d as v,f as S,a9 as N,aa as q,r as D,y as F,z as R,j as e,K as d,B as U}from"./index-C24s9YLx.js";import{e as V}from"./index-Bs2AcXlY.js";const T=({forgotObj:n})=>{var c,m;const{t:a}=v(),u=S(),p=N(),w=q(),x={password:"",confirmPassword:""},[t,g]=D.useState(x),{register:i,handleSubmit:f,errors:o,setValue:h}=F(t),l=(s,r)=>{g(y=>({...y,[s]:r})),h(s,r)},{trigger:b,isMutating:P}=R("user/auth/password/reset",async()=>V({email:n.email,confirmString:n.confirmString,newPassword:t.password})),j=async()=>{try{const s=await b();if(s&&s.correctUser){const{correctUser:r}=s;p({user:r==null?void 0:r.props}),u("/login")}else throw new Error(a("Password change failed. Please try again."))}catch{w()}};return e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-extrabold leading-[1.25] text-text01 mt-20 mb-1",children:a("forgot.passwordRecovery")}),e.jsx("p",{className:"font-normal text-text01 text-base mb-5",children:a("forgot.please")}),e.jsxs("form",{onSubmit:f(j),children:[e.jsx(d,{type:"password",title:a("login.password"),classname:"mb-5",value:t.password,changeValue:s=>l("password",s.target.value),error:!!o.password,...i("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}}),helperText:((c=o.password)==null?void 0:c.message)||""}),e.jsx(d,{type:"password",title:a("profile.confirm"),classname:"mb-5",value:t.confirmPassword,changeValue:s=>l("confirmPassword",s.target.value),error:!!o.confirmPassword,...i("confirmPassword",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"},validate:s=>s===t.password||"Passwords do not match"}),helperText:((m=o.confirmPassword)==null?void 0:m.message)||""}),e.jsx("div",{className:"flex items-center justify-between mb-10",children:e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"checkbox",className:"rounded text-primary02 border-text02"}),e.jsx("span",{className:"ml-2 text-sm text-text02",children:a("login.remember")})]})}),e.jsx(U,{type:"basic",title:a("login.login"),form:!0,classname:"w-full",isLoading:P})]})]})};export{T as default};
