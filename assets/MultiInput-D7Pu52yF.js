import{d as M,r as i,j as s,aA as h,S as O,I as T,aM as z,a_ as E}from"./index-C24s9YLx.js";const{Option:B}=h,P=({options:t,value:p=[],placeholder:w="Название тега",onChange:l,searchValue:a="",setSearchValue:r,handleChange:d,isLoading:y=!1,loadingOptions:b=!1})=>{const{t:c}=M(),[C,j]=i.useState(!1),o=i.useMemo(()=>t.filter(e=>p.includes(e.id)),[p,t]),I=e=>{const n=t.filter(x=>e.includes(x.id));l(n)},[f,m]=i.useState(""),[u,v]=i.useState(null),N=i.useMemo(()=>t.filter(e=>e.name.toLowerCase().includes(f.toLowerCase())),[f,t]);i.useEffect(()=>{if(u){const e=t.find(n=>n.name.toLowerCase()===u.toLowerCase());e&&(l([...o,e]),v(null))}},[t,u,l,o]);const R=e=>s.jsxs("div",{children:[s.jsx("div",{style:{maxHeight:150,overflowY:"auto"},children:e}),d&&s.jsxs("div",{className:"flex items-center gap-2 p-2 border-t",children:[s.jsx(T,{value:a,onFocus:()=>j(!0),onBlur:()=>j(!1),onChange:n=>r==null?void 0:r(n.target.value),placeholder:c("marketing.tags"),size:"middle"}),s.jsx(z,{type:"primary",icon:s.jsx(E,{}),loading:y,onClick:()=>{!d||!a.trim()||(v(a.trim()),d(),r==null||r(""))},children:c("roles.create")})]})]});return s.jsxs("div",{className:"w-80",children:[s.jsx("div",{className:"text-text02 text-sm",children:c("marketing.tags")}),s.jsx(h,{mode:"multiple",style:{width:"100%"},placeholder:w,value:o.map(e=>e.id),onChange:e=>{C||I(e)},searchValue:f,onSearch:e=>m==null?void 0:m(e),dropdownRender:R,filterOption:!1,showSearch:!0,optionLabelProp:"label",size:"large",tagRender:({label:e,value:n,closable:x,onClose:k})=>{const g=t.find(L=>L.id===n);return s.jsxs("div",{style:{backgroundColor:(g==null?void 0:g.color)||"#ccc",color:"#fff",padding:"2px 8px",borderRadius:4,marginRight:4,display:"inline-flex",alignItems:"center"},children:[s.jsx("span",{children:e}),x&&s.jsx("span",{onClick:k,style:{marginLeft:8,cursor:"pointer",fontWeight:"bold"},children:"×"})]})},children:b?s.jsx("div",{className:"flex justify-center items-center h-40 m-auto",children:s.jsx(O,{size:"large"})}):N.map(e=>s.jsx(B,{value:e.id,label:e.name,children:s.jsx("div",{className:"flex justify-between items-center",children:s.jsx("span",{style:{backgroundColor:e.color,padding:"2px 6px",borderRadius:4,color:"#fff"},children:e.name})})},e.id))})]})};export{P as M};
