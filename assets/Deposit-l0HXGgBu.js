import{e as N,a2 as k,U,V,a5 as q,Z as G,_ as H,r as a,v as S,q as O,w as W,j as s,D as Z,ae as f,G as _,H as z}from"./index-C24s9YLx.js";import{S as A}from"./Saly-45-CS9u2NZ4.js";import{c as B}from"./index-BzKdJFVM.js";import{F as J}from"./FilterMonitoring-DnjDobpT.js";const F=()=>{var g;const n=N(),u=k(),h=U(),E=V(),i=q(),x=G(),y=H(),[D,I]=a.useState(!1);a.useEffect(()=>{var t;(t=n.state)!=null&&t.ownerId&&(i(n.state.ownerId),I(!0))},[(g=n.state)==null?void 0:g.ownerId,i]);const[j,l]=a.useState(!1),T={dateStart:h,dateEnd:E,posId:u},[e,P]=a.useState(T),v=t=>{P(o=>({...o,...t})),l(!0),t.posId&&i(t.posId),t.dateStart&&x(t.dateStart),t.dateEnd&&y(t.dateEnd)},{data:d,isLoading:L,mutate:p}=S(D?["get-pos-deposits"]:null,()=>B(u,{dateStart:e==null?void 0:e.dateStart,dateEnd:e==null?void 0:e.dateEnd})),m=O(),{data:r,error:b,isLoading:R,isValidating:M}=S(["get-pos",m],()=>W({placementId:m}));a.useEffect(()=>{},[b]),a.useEffect(()=>{p().then(()=>l(!1))},[e,p]);const c=(d==null?void 0:d.map(t=>t).sort((t,o)=>t.id-o.id))||[],C=[...((r==null?void 0:r.map(t=>t).sort((t,o)=>t.id-o.id))||[]).map(t=>({name:t.name,value:t.id}))];return s.jsxs(s.Fragment,{children:[s.jsx(J,{count:c.length,posesSelect:C,handleDataFilter:v,hideCity:!0,hideSearch:!0,hideReset:!0,loadingPos:R||M}),j||L?s.jsx(Z,{columnCount:f.length}):c.length>0?s.jsx("div",{className:"mt-8",children:s.jsx(_,{data:c,columns:f,isDisplayEdit:!0,navigableFields:[{key:"name",getPath:()=>"/station/enrollments/device"}]})}):s.jsx(s.Fragment,{children:s.jsx(z,{title:"В этом разделе представленны операции",description:"У вас пока нету операций",children:s.jsx(A,{className:"mx-auto"})})})]})};export{F as default};
